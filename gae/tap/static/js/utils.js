// Generated by CoffeeScript 1.6.3
"use strict";
angular.module("utils", []).directive("formBackground", function() {
  return function($scope, elm, attrs) {
    var $form;
    $form = $(elm);
    return $form.submit(function(e) {
      $.ajax({
        type: $form.attr("method"),
        url: $form.attr("action"),
        data: $form.serializeArray()
      }).done(function(_data, _textStatus, _jqXHR) {}).fail(function(_jqXHR, textStatus, _errorThrown) {
        if (textStatus && (typeof PRODUCTION === "undefined" || PRODUCTION === null)) {
          console.log(textStatus);
        }
      });
      return false;
    });
  };
}).directive("feedbackFormBackground", function() {
  return function($scope, elm, attrs) {
    var $form;
    $form = $(elm);
    return $form.submit(function(e) {
      $("[name|=entry\\.2\\.single]", $form).val(window.location.href);
      $.ajax({
        type: $form.attr("method"),
        url: $form.attr("action"),
        data: $form.serializeArray()
      }).done(function(response) {
        var error, message;
        error = $(".errorheader", response).text();
        message = $(".ss-custom-resp", response).text();
        if (error && (typeof PRODUCTION === "undefined" || PRODUCTION === null)) {
          console.log(error);
        }
        $form.closest(".modal").modal("hide");
        $scope.$apply(function() {
          $scope.description = "";
        });
      });
      return false;
    });
  };
});
